{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-16T17:48:33.283Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-16T17:48:41.503Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-16T17:49:32.493Z","trace":""}
{"context":"CreditPackageService","level":"error","message":"Error creating credit package: Field 'credit_amount' doesn't have a default value","timestamp":"2025-06-17T05:50:03.851Z","trace":"QueryFailedError: Field 'credit_amount' doesn't have a default value\n    at Query.onResult (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error creating credit package: Field 'credit_amount' doesn't have a default value","timestamp":"2025-06-17T05:51:16.272Z","trace":"QueryFailedError: Field 'credit_amount' doesn't have a default value\n    at Query.onResult (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error creating credit package: Field 'credit_amount' doesn't have a default value","timestamp":"2025-06-17T05:52:31.509Z","trace":"QueryFailedError: Field 'credit_amount' doesn't have a default value\n    at Query.onResult (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error updating credit package with id 3: Property \"creditAmount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.","timestamp":"2025-06-17T13:35:05.097Z","trace":"EntityPropertyNotFoundError: Property \"creditAmount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.\n    at <anonymous> (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:500:31)\n    at Array.forEach (<anonymous>)\n    at UpdateQueryBuilder.createUpdateExpression (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:493:68)\n    at UpdateQueryBuilder.getQuery (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:53:21)\n    at UpdateQueryBuilder.getQueryAndParameters (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/QueryBuilder.ts:495:28)\n    at UpdateQueryBuilder.execute (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:142:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CreditPackageService.update (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/src/credit-system/services/credit-package.service.ts:85:7)\n    at async /home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditPackageService","level":"error","message":"Error updating credit package with id 3: Property \"creditAmount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.","timestamp":"2025-06-17T13:35:22.636Z","trace":"EntityPropertyNotFoundError: Property \"creditAmount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.\n    at <anonymous> (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:500:31)\n    at Array.forEach (<anonymous>)\n    at UpdateQueryBuilder.createUpdateExpression (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:493:68)\n    at UpdateQueryBuilder.getQuery (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:53:21)\n    at UpdateQueryBuilder.getQueryAndParameters (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/QueryBuilder.ts:495:28)\n    at UpdateQueryBuilder.execute (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:142:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CreditPackageService.update (/home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/src/credit-system/services/credit-package.service.ts:85:7)\n    at async /home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Downloads/_DOWNLOADS/projectoIA/sistema-matematica-ia-backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:41:15.298Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:41:16.321Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:41:18.337Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:41:22.360Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:41:49.068Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:41:49.532Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:41:50.560Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:41:52.591Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:41:56.653Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:43:00.999Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:43:12.408Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:43:52.850Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"CreditPackageService","level":"error","message":"Error fetching credit package with id NaN: Unknown column 'NaN' in 'where clause'","timestamp":"2025-06-23T20:45:31.098Z","trace":"QueryFailedError: Unknown column 'NaN' in 'where clause'\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"StripeService","level":"error","message":"Error creating checkout session: Cannot read properties of undefined (reading 'checkout')","timestamp":"2025-06-23T20:48:36.843Z","trace":"TypeError: Cannot read properties of undefined (reading 'checkout')\n    at StripeService.createStripeCheckoutSession (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/services/stripe.service.ts:44:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CreditTransactionController.createCheckoutSession (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/controllers/credit-transaction.controller.ts:97:21)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"StripeService","level":"error","message":"Error creating checkout session: Cannot read properties of undefined (reading 'checkout')","timestamp":"2025-06-23T20:52:22.129Z","trace":"TypeError: Cannot read properties of undefined (reading 'checkout')\n    at StripeService.createStripeCheckoutSession (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/services/stripe.service.ts:49:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CreditTransactionController.createCheckoutSession (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/controllers/credit-transaction.controller.ts:97:21)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-23T20:53:55.845Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-23T21:05:26.979Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-23T21:05:31.487Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-23T21:33:53.546Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-23T21:33:57.065Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-23T21:33:59.187Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-23T21:36:45.522Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-23T21:38:53.688Z","trace":""}
{"context":"StripeService","level":"error","message":"STRIPE_SECRET_KEY is not defined in the environment variables","timestamp":"2025-06-23T21:39:47.780Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Webhook Error: stream is not readable","timestamp":"2025-06-24T04:13:18.528Z","trace":"InternalServerError: stream is not readable\n    at readStream (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:185:17)\n    at executor (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:120:5)\n    at new Promise (<anonymous>)\n    at getRawBody (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:119:10)\n    at CreditTransactionController.handleStripeWebhook (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/controllers/credit-transaction.controller.ts:144:26)\n    at /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:38:29\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditTransactionController","level":"error","message":"Webhook Error: stream is not readable","timestamp":"2025-06-24T04:13:18.543Z","trace":"InternalServerError: stream is not readable\n    at readStream (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:185:17)\n    at executor (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:120:5)\n    at new Promise (<anonymous>)\n    at getRawBody (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:119:10)\n    at CreditTransactionController.handleStripeWebhook (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/controllers/credit-transaction.controller.ts:144:26)\n    at /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:38:29\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditTransactionController","level":"error","message":"Webhook Error: stream is not readable","timestamp":"2025-06-24T04:13:18.662Z","trace":"InternalServerError: stream is not readable\n    at readStream (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:185:17)\n    at executor (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:120:5)\n    at new Promise (<anonymous>)\n    at getRawBody (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:119:10)\n    at CreditTransactionController.handleStripeWebhook (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/controllers/credit-transaction.controller.ts:144:26)\n    at /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:38:29\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditTransactionController","level":"error","message":"Webhook Error: stream is not readable","timestamp":"2025-06-24T04:13:18.691Z","trace":"InternalServerError: stream is not readable\n    at readStream (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:185:17)\n    at executor (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:120:5)\n    at new Promise (<anonymous>)\n    at getRawBody (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:119:10)\n    at CreditTransactionController.handleStripeWebhook (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/controllers/credit-transaction.controller.ts:144:26)\n    at /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:38:29\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditTransactionController","level":"error","message":"Webhook Error: stream is not readable","timestamp":"2025-06-24T04:13:20.773Z","trace":"InternalServerError: stream is not readable\n    at readStream (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:185:17)\n    at executor (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:120:5)\n    at new Promise (<anonymous>)\n    at getRawBody (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/raw-body/index.js:119:10)\n    at CreditTransactionController.handleStripeWebhook (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/controllers/credit-transaction.controller.ts:144:26)\n    at /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:38:29\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:25:23.359Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:25:23.378Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:25:23.551Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:25:23.552Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:25:25.769Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:42:24.324Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:42:24.378Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:42:24.451Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:42:24.506Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:42:26.572Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:47:17.469Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:47:17.564Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:47:17.678Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:47:17.709Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:47:20.067Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:50:38.708Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:50:38.735Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:50:38.815Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:50:38.906Z","trace":""}
{"context":"CreditTransactionController","level":"error","message":"Raw body is not available for Stripe webhook verification.","timestamp":"2025-06-24T04:50:41.130Z","trace":""}
{"context":"CreditService","level":"error","message":"Missing metadata (userId, packageId, or creditsAmount) in Stripe session: cs_test_a1QHr2UnWZLYuGWz8B96RN1hUe8cfMp8eU5Pyigfs7dPreOshcXqmNAFB3","timestamp":"2025-06-24T04:53:14.395Z","trace":"{\"packageId\":\"5\"}"}
{"context":"CreditTransactionController","level":"error","message":"Error processing checkout session cs_test_a1QHr2UnWZLYuGWz8B96RN1hUe8cfMp8eU5Pyigfs7dPreOshcXqmNAFB3 in CreditService: Stripe session metadata incomplete.","timestamp":"2025-06-24T04:53:14.399Z","trace":"BadRequestException: Stripe session metadata incomplete.\n    at CreditService.handleSuccessfulCheckoutSession (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/services/credit.service.ts:245:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CreditTransactionController.handleStripeWebhook (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/controllers/credit-transaction.controller.ts:192:11)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditPackageService","level":"error","message":"Error updating credit package with id 5: Property \"credit_amount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.","timestamp":"2025-07-01T23:31:44.897Z","trace":"EntityPropertyNotFoundError: Property \"credit_amount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.\n    at <anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:500:31)\n    at Array.forEach (<anonymous>)\n    at UpdateQueryBuilder.createUpdateExpression (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:493:68)\n    at UpdateQueryBuilder.getQuery (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:53:21)\n    at UpdateQueryBuilder.getQueryAndParameters (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/QueryBuilder.ts:495:28)\n    at UpdateQueryBuilder.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:142:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CreditPackageService.update (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/services/credit-package.service.ts:99:7)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditPackageService","level":"error","message":"Error updating credit package with id 5: Property \"credit_amount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.","timestamp":"2025-07-01T23:34:21.202Z","trace":"EntityPropertyNotFoundError: Property \"credit_amount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.\n    at <anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:500:31)\n    at Array.forEach (<anonymous>)\n    at UpdateQueryBuilder.createUpdateExpression (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:493:68)\n    at UpdateQueryBuilder.getQuery (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:53:21)\n    at UpdateQueryBuilder.getQueryAndParameters (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/QueryBuilder.ts:495:28)\n    at UpdateQueryBuilder.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:142:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CreditPackageService.update (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/services/credit-package.service.ts:99:7)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditPackageService","level":"error","message":"Error updating credit package with id 5: Property \"credit_amount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.","timestamp":"2025-07-01T23:34:40.494Z","trace":"EntityPropertyNotFoundError: Property \"credit_amount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.\n    at <anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:500:31)\n    at Array.forEach (<anonymous>)\n    at UpdateQueryBuilder.createUpdateExpression (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:493:68)\n    at UpdateQueryBuilder.getQuery (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:53:21)\n    at UpdateQueryBuilder.getQueryAndParameters (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/QueryBuilder.ts:495:28)\n    at UpdateQueryBuilder.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:142:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CreditPackageService.update (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/services/credit-package.service.ts:99:7)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditPackageService","level":"error","message":"Error updating credit package with id 5: Property \"credit_amount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.","timestamp":"2025-07-01T23:35:24.071Z","trace":"EntityPropertyNotFoundError: Property \"credit_amount\" was not found in \"CreditPackageEntity\". Make sure your query is correct.\n    at <anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:500:31)\n    at Array.forEach (<anonymous>)\n    at UpdateQueryBuilder.createUpdateExpression (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:493:68)\n    at UpdateQueryBuilder.getQuery (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:53:21)\n    at UpdateQueryBuilder.getQueryAndParameters (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/QueryBuilder.ts:495:28)\n    at UpdateQueryBuilder.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/query-builder/src/query-builder/UpdateQueryBuilder.ts:142:50)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async CreditPackageService.update (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/src/credit-system/services/credit-package.service.ts:99:7)\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-execution-context.js:46:28\n    at async /home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/@nestjs/core/router/router-proxy.js:9:17"}
{"context":"CreditService","level":"error","message":"Error adding welcome credits: Field 'balance_before' doesn't have a default value","timestamp":"2025-07-02T00:33:15.971Z","trace":"QueryFailedError: Field 'balance_before' doesn't have a default value\n    at Query.onResult (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/typeorm/driver/src/driver/mysql/MysqlQueryRunner.ts:247:33)\n    at Query.execute (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/commands/command.js:36:14)\n    at PoolConnection.handlePacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n    at PacketParser.onPacket (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n    at PacketParser.executeStart (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n    at Socket.<anonymous> (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica-ia/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)"}
{"context":"StripeService","level":"error","message":"Error creating checkout session: The Checkout Session's total amount must convert to at least 50 cents. S/.1.00 converts to approximately $0.28.","timestamp":"2025-07-16T00:57:07.733Z","trace":"Error: The Checkout Session's total amount must convert to at least 50 cents. S/.1.00 converts to approximately $0.28.\n    at generateV1Error (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica/backend/node_modules/stripe/cjs/Error.js:11:20)\n    at res.toJSON.then.Error_js_1.StripeAPIError.message (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica/backend/node_modules/stripe/cjs/RequestSender.js:108:62)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"context":"StripeService","level":"error","message":"Error creating checkout session: The Checkout Session's total amount must convert to at least 50 cents. S/.1.00 converts to approximately $0.28.","timestamp":"2025-07-16T00:57:14.482Z","trace":"Error: The Checkout Session's total amount must convert to at least 50 cents. S/.1.00 converts to approximately $0.28.\n    at generateV1Error (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica/backend/node_modules/stripe/cjs/Error.js:11:20)\n    at res.toJSON.then.Error_js_1.StripeAPIError.message (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica/backend/node_modules/stripe/cjs/RequestSender.js:108:62)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"context":"StripeService","level":"error","message":"Error creating checkout session: The Checkout Session's total amount must convert to at least 50 cents. S/.1.00 converts to approximately $0.28.","timestamp":"2025-07-17T23:09:15.716Z","trace":"Error: The Checkout Session's total amount must convert to at least 50 cents. S/.1.00 converts to approximately $0.28.\n    at generateV1Error (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica/backend/node_modules/stripe/cjs/Error.js:11:20)\n    at res.toJSON.then.Error_js_1.StripeAPIError.message (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica/backend/node_modules/stripe/cjs/RequestSender.js:108:62)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"context":"StripeService","level":"error","message":"Error creating checkout session: The Checkout Session's total amount must convert to at least 50 cents. S/.1.00 converts to approximately $0.28.","timestamp":"2025-07-23T23:53:00.228Z","trace":"Error: The Checkout Session's total amount must convert to at least 50 cents. S/.1.00 converts to approximately $0.28.\n    at generateV1Error (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica/backend/node_modules/stripe/cjs/Error.js:11:20)\n    at res.toJSON.then.Error_js_1.StripeAPIError.message (/home/edgar/Documents/projects/projects/nodejs/sistema-matematica/backend/node_modules/stripe/cjs/RequestSender.js:108:62)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
